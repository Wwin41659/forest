<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="The “kernel” implements the FVM interface as presented to the actors. It:"><title>Kernel in fvm::kernel - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-cb6f1f67f1bcd037.css" id="mainThemeStyle"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="fvm" data-themes="" data-resource-suffix="" data-rustdoc-version="1.73.0 (cc66ad468 2023-10-03)" data-channel="1.73.0" data-search-js="search-6dfdfced5eff6596.js" data-settings-js="settings-de11bff964e9d4e5.js" data-settings-css="settings-8c76f75bfb6bd192.css" data-theme-light-css="light-1596385f77d47ef2.css" data-theme-dark-css="dark-0a43001d3fc2282c.css" data-theme-ayu-css="ayu-fd19013d6ce078bf.css" ><script src="../../static.files/storage-db41da1a38ea3cb8.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-0795b7d26be81095.js"></script><noscript><link rel="stylesheet" media="(prefers-color-scheme:light)" href="../../static.files/light-1596385f77d47ef2.css"><link rel="stylesheet" media="(prefers-color-scheme:dark)" href="../../static.files/dark-0a43001d3fc2282c.css"><link rel="stylesheet" href="../../static.files/noscript-cffde32267a19fd6.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../../fvm/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../../fvm/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Kernel</a></h2><div class="sidebar-elems"><section><h3><a href="#required-associated-types">Required Associated Types</a></h3><ul class="block"><li><a href="#associatedtype.CallManager">CallManager</a></li></ul><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.into_inner">into_inner</a></li><li><a href="#tymethod.machine">machine</a></li><li><a href="#tymethod.new">new</a></li><li><a href="#tymethod.send">send</a></li></ul><h3><a href="#implementors">Implementors</a></h3></section><h2><a href="index.html">In fvm::kernel</a></h2></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Trait <a href="../index.html">fvm</a>::<wbr><a href="index.html">kernel</a>::<wbr><a class="trait" href="#">Kernel</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../../src/fvm/kernel/mod.rs.html#54-116">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub trait Kernel: <a class="trait" href="trait.ActorOps.html" title="trait fvm::kernel::ActorOps">ActorOps</a> + <a class="trait" href="trait.IpldBlockOps.html" title="trait fvm::kernel::IpldBlockOps">IpldBlockOps</a> + <a class="trait" href="trait.CircSupplyOps.html" title="trait fvm::kernel::CircSupplyOps">CircSupplyOps</a> + <a class="trait" href="trait.CryptoOps.html" title="trait fvm::kernel::CryptoOps">CryptoOps</a> + <a class="trait" href="trait.DebugOps.html" title="trait fvm::kernel::DebugOps">DebugOps</a> + <a class="trait" href="trait.EventOps.html" title="trait fvm::kernel::EventOps">EventOps</a> + <a class="trait" href="trait.GasOps.html" title="trait fvm::kernel::GasOps">GasOps</a> + <a class="trait" href="trait.MessageOps.html" title="trait fvm::kernel::MessageOps">MessageOps</a> + <a class="trait" href="trait.NetworkOps.html" title="trait fvm::kernel::NetworkOps">NetworkOps</a> + <a class="trait" href="trait.RandomnessOps.html" title="trait fvm::kernel::RandomnessOps">RandomnessOps</a> + <a class="trait" href="trait.SelfOps.html" title="trait fvm::kernel::SelfOps">SelfOps</a> + <a class="trait" href="trait.LimiterOps.html" title="trait fvm::kernel::LimiterOps">LimiterOps</a> + 'static {
    type <a href="#associatedtype.CallManager" class="associatedtype">CallManager</a>: <a class="trait" href="../call_manager/trait.CallManager.html" title="trait fvm::call_manager::CallManager">CallManager</a>;

    // Required methods
    fn <a href="#tymethod.into_inner" class="fn">into_inner</a>(self) -&gt; (Self::<a class="associatedtype" href="trait.Kernel.html#associatedtype.CallManager" title="type fvm::kernel::Kernel::CallManager">CallManager</a>, <a class="struct" href="struct.BlockRegistry.html" title="struct fvm::kernel::BlockRegistry">BlockRegistry</a>)
       <span class="where">where Self: <a class="trait" href="https://doc.rust-lang.org/1.73.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a></span>;
<span class="item-spacer"></span>    fn <a href="#tymethod.new" class="fn">new</a>(
        mgr: Self::<a class="associatedtype" href="trait.Kernel.html#associatedtype.CallManager" title="type fvm::kernel::Kernel::CallManager">CallManager</a>,
        blocks: <a class="struct" href="struct.BlockRegistry.html" title="struct fvm::kernel::BlockRegistry">BlockRegistry</a>,
        caller: <a class="type" href="../../fvm_shared/type.ActorID.html" title="type fvm_shared::ActorID">ActorID</a>,
        actor_id: <a class="type" href="../../fvm_shared/type.ActorID.html" title="type fvm_shared::ActorID">ActorID</a>,
        method: <a class="type" href="../../fvm_shared/type.MethodNum.html" title="type fvm_shared::MethodNum">MethodNum</a>,
        value_received: <a class="struct" href="../../fvm_shared/econ/struct.TokenAmount.html" title="struct fvm_shared::econ::TokenAmount">TokenAmount</a>,
        read_only: <a class="primitive" href="https://doc.rust-lang.org/1.73.0/std/primitive.bool.html">bool</a>
    ) -&gt; Self
       <span class="where">where Self: <a class="trait" href="https://doc.rust-lang.org/1.73.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a></span>;
<span class="item-spacer"></span>    fn <a href="#tymethod.machine" class="fn">machine</a>(&amp;self) -&gt; &amp;&lt;Self::<a class="associatedtype" href="trait.Kernel.html#associatedtype.CallManager" title="type fvm::kernel::Kernel::CallManager">CallManager</a> as <a class="trait" href="../call_manager/trait.CallManager.html" title="trait fvm::call_manager::CallManager">CallManager</a>&gt;::<a class="associatedtype" href="../call_manager/trait.CallManager.html#associatedtype.Machine" title="type fvm::call_manager::CallManager::Machine">Machine</a>;
<span class="item-spacer"></span>    fn <a href="#tymethod.send" class="fn">send</a>&lt;K: <a class="trait" href="trait.Kernel.html" title="trait fvm::kernel::Kernel">Kernel</a>&lt;CallManager = Self::<a class="associatedtype" href="trait.Kernel.html#associatedtype.CallManager" title="type fvm::kernel::Kernel::CallManager">CallManager</a>&gt;&gt;(
        &amp;mut self,
        recipient: &amp;<a class="struct" href="../../fvm_shared/address/struct.Address.html" title="struct fvm_shared::address::Address">Address</a>,
        method: <a class="primitive" href="https://doc.rust-lang.org/1.73.0/std/primitive.u64.html">u64</a>,
        params: <a class="type" href="type.BlockId.html" title="type fvm::kernel::BlockId">BlockId</a>,
        value: &amp;<a class="struct" href="../../fvm_shared/econ/struct.TokenAmount.html" title="struct fvm_shared::econ::TokenAmount">TokenAmount</a>,
        gas_limit: <a class="enum" href="https://doc.rust-lang.org/1.73.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../gas/struct.Gas.html" title="struct fvm::gas::Gas">Gas</a>&gt;,
        flags: <a class="struct" href="../../fvm_shared/sys/struct.SendFlags.html" title="struct fvm_shared::sys::SendFlags">SendFlags</a>
    ) -&gt; <a class="type" href="type.Result.html" title="type fvm::kernel::Result">Result</a>&lt;<a class="struct" href="struct.SendResult.html" title="struct fvm::kernel::SendResult">SendResult</a>&gt;;
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>The “kernel” implements the FVM interface as presented to the actors. It:</p>
<ul>
<li>Manages the Actor’s state.</li>
<li>Tracks and charges for IPLD &amp; syscall-specific gas.</li>
</ul>
<p>Actors may call into the kernel via the syscalls defined in the <a href="../syscalls/index.html" title="mod fvm::syscalls"><code>syscalls</code></a>
module.</p>
</div></details><h2 id="required-associated-types" class="small-section-header">Required Associated Types<a href="#required-associated-types" class="anchor">§</a></h2><div class="methods"><details class="toggle" open><summary><section id="associatedtype.CallManager" class="method"><a class="src rightside" href="../../src/fvm/kernel/mod.rs.html#70">source</a><h4 class="code-header">type <a href="#associatedtype.CallManager" class="associatedtype">CallManager</a>: <a class="trait" href="../call_manager/trait.CallManager.html" title="trait fvm::call_manager::CallManager">CallManager</a></h4></section></summary><div class="docblock"><p>The <a href="trait.Kernel.html" title="trait fvm::kernel::Kernel"><code>Kernel</code></a>’s <a href="../call_manager/trait.CallManager.html" title="trait fvm::call_manager::CallManager"><code>CallManager</code></a> is</p>
</div></details></div><h2 id="required-methods" class="small-section-header">Required Methods<a href="#required-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="tymethod.into_inner" class="method"><a class="src rightside" href="../../src/fvm/kernel/mod.rs.html#73-75">source</a><h4 class="code-header">fn <a href="#tymethod.into_inner" class="fn">into_inner</a>(self) -&gt; (Self::<a class="associatedtype" href="trait.Kernel.html#associatedtype.CallManager" title="type fvm::kernel::Kernel::CallManager">CallManager</a>, <a class="struct" href="struct.BlockRegistry.html" title="struct fvm::kernel::BlockRegistry">BlockRegistry</a>)<span class="where fmt-newline">where
    Self: <a class="trait" href="https://doc.rust-lang.org/1.73.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</span></h4></section></summary><div class="docblock"><p>Consume the <a href="trait.Kernel.html" title="trait fvm::kernel::Kernel"><code>Kernel</code></a> and return the underlying <a href="../call_manager/trait.CallManager.html" title="trait fvm::call_manager::CallManager"><code>CallManager</code></a> and <a href="struct.BlockRegistry.html" title="struct fvm::kernel::BlockRegistry"><code>BlockRegistry</code></a>.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.new" class="method"><a class="src rightside" href="../../src/fvm/kernel/mod.rs.html#85-95">source</a><h4 class="code-header">fn <a href="#tymethod.new" class="fn">new</a>(
    mgr: Self::<a class="associatedtype" href="trait.Kernel.html#associatedtype.CallManager" title="type fvm::kernel::Kernel::CallManager">CallManager</a>,
    blocks: <a class="struct" href="struct.BlockRegistry.html" title="struct fvm::kernel::BlockRegistry">BlockRegistry</a>,
    caller: <a class="type" href="../../fvm_shared/type.ActorID.html" title="type fvm_shared::ActorID">ActorID</a>,
    actor_id: <a class="type" href="../../fvm_shared/type.ActorID.html" title="type fvm_shared::ActorID">ActorID</a>,
    method: <a class="type" href="../../fvm_shared/type.MethodNum.html" title="type fvm_shared::MethodNum">MethodNum</a>,
    value_received: <a class="struct" href="../../fvm_shared/econ/struct.TokenAmount.html" title="struct fvm_shared::econ::TokenAmount">TokenAmount</a>,
    read_only: <a class="primitive" href="https://doc.rust-lang.org/1.73.0/std/primitive.bool.html">bool</a>
) -&gt; Self<span class="where fmt-newline">where
    Self: <a class="trait" href="https://doc.rust-lang.org/1.73.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</span></h4></section></summary><div class="docblock"><p>Construct a new <a href="trait.Kernel.html" title="trait fvm::kernel::Kernel"><code>Kernel</code></a> from the given <a href="../call_manager/trait.CallManager.html" title="trait fvm::call_manager::CallManager"><code>CallManager</code></a>.</p>
<ul>
<li><code>caller</code> is the ID of the <em>immediate</em> caller.</li>
<li><code>actor_id</code> is the ID of <em>this</em> actor.</li>
<li><code>method</code> is the method that has been invoked.</li>
<li><code>value_received</code> is value received due to the current call.</li>
<li><code>blocks</code> is the initial block registry (should already contain the parameters).</li>
</ul>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.machine" class="method"><a class="src rightside" href="../../src/fvm/kernel/mod.rs.html#98">source</a><h4 class="code-header">fn <a href="#tymethod.machine" class="fn">machine</a>(&amp;self) -&gt; &amp;&lt;Self::<a class="associatedtype" href="trait.Kernel.html#associatedtype.CallManager" title="type fvm::kernel::Kernel::CallManager">CallManager</a> as <a class="trait" href="../call_manager/trait.CallManager.html" title="trait fvm::call_manager::CallManager">CallManager</a>&gt;::<a class="associatedtype" href="../call_manager/trait.CallManager.html#associatedtype.Machine" title="type fvm::call_manager::CallManager::Machine">Machine</a></h4></section></summary><div class="docblock"><p>The kernel’s underlying “machine”.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.send" class="method"><a class="src rightside" href="../../src/fvm/kernel/mod.rs.html#107-115">source</a><h4 class="code-header">fn <a href="#tymethod.send" class="fn">send</a>&lt;K: <a class="trait" href="trait.Kernel.html" title="trait fvm::kernel::Kernel">Kernel</a>&lt;CallManager = Self::<a class="associatedtype" href="trait.Kernel.html#associatedtype.CallManager" title="type fvm::kernel::Kernel::CallManager">CallManager</a>&gt;&gt;(
    &amp;mut self,
    recipient: &amp;<a class="struct" href="../../fvm_shared/address/struct.Address.html" title="struct fvm_shared::address::Address">Address</a>,
    method: <a class="primitive" href="https://doc.rust-lang.org/1.73.0/std/primitive.u64.html">u64</a>,
    params: <a class="type" href="type.BlockId.html" title="type fvm::kernel::BlockId">BlockId</a>,
    value: &amp;<a class="struct" href="../../fvm_shared/econ/struct.TokenAmount.html" title="struct fvm_shared::econ::TokenAmount">TokenAmount</a>,
    gas_limit: <a class="enum" href="https://doc.rust-lang.org/1.73.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../gas/struct.Gas.html" title="struct fvm::gas::Gas">Gas</a>&gt;,
    flags: <a class="struct" href="../../fvm_shared/sys/struct.SendFlags.html" title="struct fvm_shared::sys::SendFlags">SendFlags</a>
) -&gt; <a class="type" href="type.Result.html" title="type fvm::kernel::Result">Result</a>&lt;<a class="struct" href="struct.SendResult.html" title="struct fvm::kernel::SendResult">SendResult</a>&gt;</h4></section></summary><div class="docblock"><p>Sends a message to another actor.
The method type parameter K is the type of the kernel to instantiate for
the receiving actor. This is necessary to support wrapping a kernel, so the outer
kernel can specify its Self as the receiver’s kernel type, rather than the wrapped
kernel specifying its Self.
This method is part of the Kernel trait so it can refer to the Self::CallManager
associated type necessary to constrain K.</p>
</div></details></div><h2 id="implementors" class="small-section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"><details class="toggle implementors-toggle"><summary><section id="impl-Kernel-for-DefaultKernel%3CC%3E" class="impl"><a class="src rightside" href="../../src/fvm/kernel/default.rs.html#74-176">source</a><a href="#impl-Kernel-for-DefaultKernel%3CC%3E" class="anchor">§</a><h3 class="code-header">impl&lt;C&gt; <a class="trait" href="trait.Kernel.html" title="trait fvm::kernel::Kernel">Kernel</a> for <a class="struct" href="default/struct.DefaultKernel.html" title="struct fvm::kernel::default::DefaultKernel">DefaultKernel</a>&lt;C&gt;<span class="where fmt-newline">where
    C: <a class="trait" href="../call_manager/trait.CallManager.html" title="trait fvm::call_manager::CallManager">CallManager</a>,</span></h3></section></summary><div class="impl-items"><section id="associatedtype.CallManager-1" class="associatedtype trait-impl"><a href="#associatedtype.CallManager-1" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.CallManager" class="associatedtype">CallManager</a> = C</h4></section></div></details></div><script src="../../implementors/fvm/kernel/trait.Kernel.js" async></script></section></div></main></body></html>